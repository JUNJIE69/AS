<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡æœ¬é˜…è¯»å™¨ - åŠŸèƒ½æœºç‰ˆ</title>
    <style type="text/css">
        /* åŠŸèƒ½æœºå…¼å®¹CSS - åªä½¿ç”¨åŸºæœ¬CSS2 */
        * {
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: Arial, sans-serif;
            font-size: 16px;
            background: #ffffff;
            color: #000000;
            line-height: 1.5;
            padding: 5px;
            margin: 0;
        }
        
        h1 {
            font-size: 20px;
            text-align: center;
            background: #0066cc;
            color: white;
            padding: 10px;
            margin: 0 0 10px 0;
        }
        
        .info {
            background: #f0f0f0;
            padding: 8px;
            margin: 0 0 10px 0;
            border: 1px solid #ccc;
            font-size: 14px;
        }
        
        .content {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 10px;
            margin: 0 0 10px 0;
            min-height: 300px;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-size: 18px;
            line-height: 1.8;
        }
        
        .controls {
            text-align: center;
            margin: 10px 0;
        }
        
        .nav-row {
            margin: 5px 0;
        }
        
        .button {
            display: inline-block;
            padding: 8px 15px;
            margin: 2px;
            background: #0066cc;
            color: white;
            text-decoration: none;
            border: 2px outset #0066cc;
            font-size: 16px;
            cursor: pointer;
        }
        
        .button:active {
            border: 2px inset #0066cc;
        }
        
        .button:disabled {
            background: #999999;
            border: 2px outset #999999;
            cursor: default;
        }
        
        .jump-box {
            background: #f0f0f0;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            display: none;
        }
        
        .page-input {
            width: 60px;
            padding: 5px;
            font-size: 16px;
            margin: 0 5px;
        }
        
        .page-indicator {
            text-align: center;
            margin: 10px 0;
            font-size: 14px;
        }
        
        .dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #ccc;
            margin: 0 3px;
            border-radius: 50%;
        }
        
        .dot.active {
            background: #0066cc;
        }
        
        .status {
            background: #ffffcc;
            padding: 8px;
            margin: 10px 0;
            border: 1px solid #ffcc00;
            font-size: 14px;
        }
        
        .error {
            background: #ffcccc;
            padding: 8px;
            margin: 10px 0;
            border: 1px solid #ff0000;
            font-size: 14px;
        }
        
        /* åŠŸèƒ½æœºç‰¹æ®Šæ ·å¼ */
        a {
            -webkit-tap-highlight-color: rgba(0,0,0,0);
        }
        
        /* é¿å…Opera Minié‡æ–°å¸ƒå±€ */
        div {
            -opera-mini-break: avoid;
        }
    </style>
</head>
<body>
    <h1>ğŸ“– åŠŸèƒ½æœºæ–‡æœ¬é˜…è¯»å™¨</h1>
    
    <div class="info">
        <div>ç¬¬ <span id="currentPage">1</span> é¡µ / å…± <span id="totalPages">0</span> é¡µ</div>
        <div>æ€»å­—æ•°: <span id="totalChars">0</span></div>
        <div id="networkInfo">åŠ è½½ä¸­...</div>
    </div>
    
    <div class="content" id="contentText">
        æ­£åœ¨åŠ è½½æ–‡æœ¬å†…å®¹...
    </div>
    
    <div class="page-indicator" id="pageIndicator"></div>
    
    <div class="controls">
        <div class="nav-row">
            <a href="javascript:void(0)" class="button" id="prevBtn" onclick="prevPage()" style="display:inline-block;">â—€ ä¸Šä¸€é¡µ</a>
            <a href="javascript:void(0)" class="button" onclick="toggleJump()" style="display:inline-block;">ğŸ“– è·³è½¬</a>
            <a href="javascript:void(0)" class="button" id="nextBtn" onclick="nextPage()" style="display:inline-block;">ä¸‹ä¸€é¡µ â–¶</a>
        </div>
        
        <div class="nav-row">
            <a href="javascript:void(0)" class="button" onclick="goToPage(1)" style="display:inline-block;">ç¬¬ä¸€é¡µ</a>
            <a href="javascript:void(0)" class="button" onclick="goToEnd()" style="display:inline-block;">æœ€åä¸€é¡µ</a>
            <a href="javascript:void(0)" class="button" onclick="reloadText()" style="display:inline-block;">ğŸ”„ åˆ·æ–°</a>
        </div>
    </div>
    
    <div class="jump-box" id="jumpBox">
        <div style="margin-bottom:5px;">è·³è½¬åˆ°é¡µç :</div>
        <input type="text" class="page-input" id="pageInput" value="1">
        <a href="javascript:void(0)" class="button" onclick="jumpToPage()" style="display:inline-block;">ç¡®å®š</a>
        <a href="javascript:void(0)" class="button" onclick="toggleJump()" style="display:inline-block;">å–æ¶ˆ</a>
    </div>
    
    <div id="statusMsg" class="status" style="display:none;"></div>
    <div id="errorMsg" class="error" style="display:none;"></div>
    
    <!-- ç®€å•ç»Ÿè®¡ -->
    <div style="text-align:center; font-size:12px; color:#666; margin-top:20px; padding-top:10px; border-top:1px solid #ddd;">
        åŠŸèƒ½æœºå…¼å®¹ç‰ˆ | æ¯é¡µ200å­—
    </div>

    <script type="text/javascript">
        // ========== æç®€é…ç½® ==========
        // ä½¿ç”¨GitHub Rawåœ°å€ï¼ˆæœ€å…¼å®¹ï¼‰
        var GITHUB_USERNAME = 'JUNJIE69';  // ä¿®æ”¹è¿™é‡Œ
        var GITHUB_REPO = 'AS';
        var TEXT_FILE = 'content.txt';
        var TEXT_URL = 'https://raw.githubusercontent.com/' + GITHUB_USERNAME + '/' + GITHUB_REPO + '/main/' + TEXT_FILE;
        
        // å¤‡ç”¨åœ°å€ï¼ˆå¦‚æœGitHubè¢«å±è”½ï¼‰
        var BACKUP_URL = 'https://cdn.statically.io/gh/' + GITHUB_USERNAME + '/' + GITHUB_REPO + '/main/' + TEXT_FILE;
        
        // ========== å…¨å±€å˜é‡ ==========
        var fullText = '';
        var totalPages = 0;
        var currentPage = 1;
        var wordsPerPage = 200;
        
        // ========== å…¼å®¹æ€§æ£€æµ‹ ==========
        function isOperaMini() {
            return navigator.userAgent.indexOf('Opera Mini') > -1;
        }
        
        function isUCMini() {
            return navigator.userAgent.indexOf('UCBrowser') > -1 && navigator.userAgent.indexOf('Mini') > -1;
        }
        
        // ========== æ˜¾ç¤ºæ¶ˆæ¯ ==========
        function showMessage(msg, type) {
            var msgEl = document.getElementById('statusMsg');
            var errorEl = document.getElementById('errorMsg');
            
            if (type === 'error') {
                msgEl.style.display = 'none';
                errorEl.innerHTML = msg;
                errorEl.style.display = 'block';
            } else {
                errorEl.style.display = 'none';
                msgEl.innerHTML = msg;
                msgEl.style.display = 'block';
                
                // 3ç§’åè‡ªåŠ¨éšè—
                setTimeout(function() {
                    msgEl.style.display = 'none';
                }, 3000);
            }
        }
        
        // ========== åŠ è½½æ–‡æœ¬ ==========
        function loadText() {
            showMessage('æ­£åœ¨åŠ è½½æ–‡æœ¬...', 'info');
            document.getElementById('contentText').innerHTML = 'æ­£åœ¨åŠ è½½ï¼Œè¯·ç¨å€™...';
            
            // ä½¿ç”¨XMLHttpRequestï¼ˆåŠŸèƒ½æœºå…¼å®¹ï¼‰
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4) {
                    if (xhr.status == 200) {
                        fullText = xhr.responseText;
                        processText();
                        showMessage('åŠ è½½æˆåŠŸï¼', 'info');
                    } else {
                        // å°è¯•å¤‡ç”¨åœ°å€
                        loadBackup();
                    }
                }
            };
            
            xhr.open('GET', TEXT_URL + '?t=' + new Date().getTime(), true);
            xhr.timeout = 15000; // 15ç§’è¶…æ—¶
            xhr.ontimeout = function() {
                loadBackup();
            };
            xhr.send();
        }
        
        function loadBackup() {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4) {
                    if (xhr.status == 200) {
                        fullText = xhr.responseText;
                        processText();
                        showMessage('ä»å¤‡ç”¨åœ°å€åŠ è½½æˆåŠŸ', 'info');
                    } else {
                        showMessage('åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œå’Œé…ç½®', 'error');
                        document.getElementById('contentText').innerHTML = 
                            'åŠ è½½å¤±è´¥ï¼è¯·æ£€æŸ¥ï¼š\n1. GitHubç”¨æˆ·åæ˜¯å¦æ­£ç¡®\n2. ç½‘ç»œè¿æ¥\n3. æ–‡ä»¶æ˜¯å¦å­˜åœ¨\n\nå½“å‰é…ç½®ï¼š\nç”¨æˆ·ï¼š' + GITHUB_USERNAME + '\nä»“åº“ï¼š' + GITHUB_REPO;
                    }
                }
            };
            
            xhr.open('GET', BACKUP_URL + '?t=' + new Date().getTime(), true);
            xhr.timeout = 10000;
            xhr.send();
        }
        
        function reloadText() {
            loadText();
        }
        
        // ========== å¤„ç†æ–‡æœ¬ ==========
        function processText() {
            // è®¡ç®—æ€»å­—æ•°
            var charCount = fullText.length;
            document.getElementById('totalChars').innerHTML = charCount;
            
            // è®¡ç®—æ€»é¡µæ•°
            totalPages = Math.ceil(charCount / wordsPerPage);
            if (totalPages < 1) totalPages = 1;
            document.getElementById('totalPages').innerHTML = totalPages;
            
            // æ˜¾ç¤ºç¬¬ä¸€é¡µ
            currentPage = 1;
            updatePage();
            
            // æ›´æ–°ç½‘ç»œä¿¡æ¯
            var browserInfo = '';
            if (isOperaMini()) browserInfo = 'Opera Mini';
            else if (isUCMini()) browserInfo = 'UC Mini';
            else browserInfo = 'æ ‡å‡†æµè§ˆå™¨';
            
            document.getElementById('networkInfo').innerHTML = 
                'æµè§ˆå™¨ï¼š' + browserInfo + ' | é¡µæ•°ï¼š' + totalPages + 'é¡µ';
        }
        
        // ========== åˆ†é¡µåŠŸèƒ½ ==========
        function getPageText(page) {
            var start = (page - 1) * wordsPerPage;
            var end = start + wordsPerPage;
            if (end > fullText.length) end = fullText.length;
            
            var pageText = fullText.substring(start, end);
            
            // æ·»åŠ é¡µçœ‰é¡µè„š
            var header = 'ç¬¬ ' + page + ' é¡µ / å…± ' + totalPages + ' é¡µ\n';
            header += 'å­—æ•°ï¼š' + fullText.length + 'å­—\n';
            header += 'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n';
            
            var footer = '\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n';
            if (page == totalPages) {
                footer += 'ğŸ“š å·²åˆ°æœ«å°¾';
            } else {
                footer += 'ä½¿ç”¨ä¸‹æ–¹æŒ‰é’®ç¿»é¡µ';
            }
            
            return header + pageText + footer;
        }
        
        function updatePage() {
            // æ›´æ–°å†…å®¹
            document.getElementById('contentText').innerHTML = getPageText(currentPage);
            document.getElementById('currentPage').innerHTML = currentPage;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.getElementById('prevBtn').className = 
                (currentPage <= 1) ? 'button' : 'button';
            document.getElementById('prevBtn').style.opacity = 
                (currentPage <= 1) ? '0.5' : '1';
                
            document.getElementById('nextBtn').className = 
                (currentPage >= totalPages) ? 'button' : 'button';
            document.getElementById('nextBtn').style.opacity = 
                (currentPage >= totalPages) ? '0.5' : '1';
            
            // æ›´æ–°åˆ†é¡µæŒ‡ç¤ºå™¨
            updatePageIndicator();
            
            // æ›´æ–°URLï¼ˆç®€å•ç‰ˆï¼‰
            if (history.replaceState) {
                try {
                    var url = window.location.pathname + '?page=' + currentPage;
                    history.replaceState(null, '', url);
                } catch(e) {}
            }
        }
        
        // ========== åˆ†é¡µæŒ‡ç¤ºå™¨ ==========
        function updatePageIndicator() {
            var indicator = document.getElementById('pageIndicator');
            var html = '';
            var dotsToShow = 5; // æ˜¾ç¤º5ä¸ªç‚¹
            
            var startPage = currentPage - 2;
            if (startPage < 1) startPage = 1;
            var endPage = startPage + dotsToShow - 1;
            if (endPage > totalPages) {
                endPage = totalPages;
                startPage = endPage - dotsToShow + 1;
                if (startPage < 1) startPage = 1;
            }
            
            for (var i = startPage; i <= endPage; i++) {
                if (i == currentPage) {
                    html += '<span class="dot active"></span>';
                } else {
                    html += '<span class="dot" onclick="goToPage(' + i + ')"></span>';
                }
            }
            
            indicator.innerHTML = html;
        }
        
        // ========== ç¿»é¡µåŠŸèƒ½ ==========
        function prevPage() {
            if (currentPage > 1) {
                currentPage--;
                updatePage();
            }
        }
        
        function nextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                updatePage();
            }
        }
        
        function goToPage(page) {
            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                updatePage();
            }
        }
        
        function goToEnd() {
            currentPage = totalPages;
            updatePage();
        }
        
        // ========== è·³è½¬åŠŸèƒ½ ==========
        function toggleJump() {
            var jumpBox = document.getElementById('jumpBox');
            if (jumpBox.style.display == 'block') {
                jumpBox.style.display = 'none';
            } else {
                jumpBox.style.display = 'block';
                document.getElementById('pageInput').value = currentPage;
                document.getElementById('pageInput').focus();
                document.getElementById('pageInput').select();
            }
        }
        
        function jumpToPage() {
            var input = document.getElementById('pageInput');
            var page = parseInt(input.value);
            
            if (!isNaN(page) && page >= 1 && page <= totalPages) {
                currentPage = page;
                updatePage();
                toggleJump();
            } else {
                alert('è¯·è¾“å…¥ 1 åˆ° ' + totalPages + ' ä¹‹é—´çš„æ•°å­—');
                input.focus();
                input.select();
            }
        }
        
        // ========== URLå‚æ•°è¯»å– ==========
        function getPageFromURL() {
            var url = window.location.search;
            var match = url.match(/[?&]page=(\d+)/);
            if (match) {
                var page = parseInt(match[1]);
                if (page >= 1 && page <= totalPages) {
                    return page;
                }
            }
            return 1;
        }
        
        // ========== é”®ç›˜å¿«æ·é”® ==========
        document.onkeydown = function(e) {
            e = e || window.event;
            var key = e.keyCode || e.which;
            
            // å·¦é”®/ä¸Šé”®ï¼šä¸Šä¸€é¡µ
            if (key == 37 || key == 38) {
                prevPage();
                return false;
            }
            
            // å³é”®/ä¸‹é”®ï¼šä¸‹ä¸€é¡µ
            if (key == 39 || key == 40) {
                nextPage();
                return false;
            }
            
            // Homeé”®ï¼šç¬¬ä¸€é¡µ
            if (key == 36) {
                goToPage(1);
                return false;
            }
            
            // Endé”®ï¼šæœ€åä¸€é¡µ
            if (key == 35) {
                goToEnd();
                return false;
            }
            
            // Jé”®ï¼šè·³è½¬
            if (key == 74 && (e.ctrlKey || e.metaKey)) {
                toggleJump();
                return false;
            }
        };
        
        // ========== åˆå§‹åŒ– ==========
        function init() {
            // æ£€æŸ¥é…ç½®
            if (GITHUB_USERNAME == 'ä½ çš„GitHubç”¨æˆ·å') {
                document.getElementById('contentText').innerHTML = 
                    'è¯·å…ˆä¿®æ”¹é…ç½®ï¼š\n\næ‰“å¼€ç½‘é¡µæºä»£ç \næ‰¾åˆ°ç¬¬177è¡Œ\nå°†"ä½ çš„GitHubç”¨æˆ·å"\næ”¹ä¸ºæ‚¨çš„å®é™…ç”¨æˆ·å\n\nç„¶åä¿å­˜å¹¶åˆ·æ–°é¡µé¢';
                return;
            }
            
            // åŠ è½½æ–‡æœ¬
            loadText();
            
            // å°è¯•ä»URLè¯»å–é¡µç 
            setTimeout(function() {
                var page = getPageFromURL();
                if (page != currentPage && fullText) {
                    currentPage = page;
                    updatePage();
                }
            }, 500);
            
            // æ˜¾ç¤ºæµè§ˆå™¨ä¿¡æ¯
            var ua = navigator.userAgent;
            var browser = 'æœªçŸ¥';
            if (ua.indexOf('Opera Mini') > -1) browser = 'Opera Mini';
            else if (ua.indexOf('UCBrowser') > -1) browser = 'UCæµè§ˆå™¨';
            else if (ua.indexOf('Nokia') > -1) browser = 'è¯ºåŸºäºšæµè§ˆå™¨';
            else if (ua.indexOf('Samsung') > -1) browser = 'ä¸‰æ˜Ÿæµè§ˆå™¨';
            else browser = 'æ ‡å‡†æµè§ˆå™¨';
            
            console.log('æµè§ˆå™¨ï¼š' + browser);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆæ—¶åˆå§‹åŒ–
        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', init);
        } else if (document.attachEvent) {
            document.attachEvent('onDOMContentLoaded', init);
        } else {
            window.onload = init;
        }
        
        // ä¼ ç»Ÿæ–¹å¼ç¡®ä¿æ‰§è¡Œ
        window.onload = init;
    </script>
</body>
</html>